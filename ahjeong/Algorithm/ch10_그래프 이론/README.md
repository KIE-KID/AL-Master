## Ch 10 그래프 이론


#### 들어가기 전
이전 5장(DFS/BFS) 와 9장(최단경로) 에서 다룬 내용은 모두 **그래프 알고리즘**의 한 유형이다.

이번 장에서는 **크루스칼 알고리즘**, **위상 정렬 알고리즘**에 대해서 배운다.

문제 풀이 팁 : '서로 다른 개체(혹은 객체) 가 연결되어 있다' → 그래프 알고리즘 (예 : '여러 개의 도시가 연결되어 있다.')



##### 🔸 그래프 vs 트리

|                     | 그래프                       | 트리             |
| ------------------- | ---------------------------- | ---------------- |
| 방향성              | 방향 그래프 or 무방향 그래프 | 방향 그래프      |
| 순환성              | 순환 및 비순환               | 비순환           |
| 루트 노드 존재 여부 | 루트 노드 없음               | 루트 노드 존재   |
| 노드간 관계성       | 부모와 자식 관계 없음        | 부모와 자식 관계 |
| 모델의 종류         | 네트워크 모델                | 계층 모델        |



##### 🔸그래프의 구현 방법

그래프의 구현 방법은 2가지가 존재한다.

노드개수(V), 간선 개수(E)

|             | 인접 행렬(Adjacency Matirx) | 인접 리스트(Adjacency List) |
| ----------- | --------------------------- | --------------------------- |
| 방법        | 2차원 배열                  | 리스트                      |
| 메모리 공간 | O(V^2)                      | **O(E)**                    |
| 찾는 비용   | **O(1)**                    | O(V)                        |

**👉 메모리와 속도(시간)을 염두에 두고 알고리즘을 선택해야 한다.**

예를 들어

9장에서 **인접 리스트를 이용한 다익스트라 최단 경로 알고리즘 / 인접 행렬을 이용한 플로이드 워셜 알고리즘** 에서

- 노드의 개수가 적은 경우 : 플로이드 워셜 알고리즘
- 노드와 간선의 개수가 모두 많은 경우 : 다익스트라 알고리즘

을 사용하면 유리하다.



#### 🌱 서로소 집합

- 서로소 집합 : 공통 원소가 없는 두 집합
- 서로소 집합 자료구조 : 서로소 부분 집합들로 나누어진 원소들의 데이터를 처리하기 위한 자료구조
- 사용 연산 : union & find
  - Union : 2개의 원소가 포함된 집합을 하나의 집합으로 합치는 연산
  - Find : 특정한 원소가 속한 집합이 어떤 집합인지 알려주는 연산



##### **1️⃣ 서로소 집합 자료구조**

서로소 집합 자료구조 구현은 **트리** 자료구조를 이용하여 집합을 표현한다. (이해를 돕기 위해 그래프로 설명)

- ##### 서로소 집합 계산 알고리즘

  ```python
  1. union 연산을 확인 -> 서로 연결된 노드 A, B 를 확인한다.
  2. A 와 B의 루트 노드인 A', B' 을 찾는다.
  3. A' 을 B'의 부모 노드로 설정한다.
  4. 모든 union 연산을 처리할 때 까지 (1,2,3)을 반복한다.
  ```

  전체 집합 {1, 2, 3, 4, 5, 6} 총 6개의 원소와 4개의 union 연산이 주어졌을 때,

  **번호가 작은 노드: 부모**

  **번호가 큰 노드 : 자식**

  이 되게끔 화살표를 표현해주면 다음 그림과 같다.

  ![](https://media.vlpt.us/images/postivegirl/post/0f0e580b-5334-4a32-987b-562ebfa298be/image.png)

  ​	Union 연산을 함으로써 서로소 집합을 확인할 수 있다.

  ​	<이 알고리즘에서 유의할 점>

  - union 연산을 효과적으로 수행하기 위해 **부모 테이블**을 항상 가지고 있어야 한다.
   - 루트 노드를 즉시 계산 할 수 없고, **부모 테이블** 을 계속 확인하며 **거슬러** 올라가야 한다.

  **🔸 부모 테이블**

  - 초기 : 모든 원소는 자기 자신을 부모로 설정
  - Union 할 때 더 큰 루트 노드가 더 작은 루트 노드를 가리키도록 설정 (더 작은 루트 노드가 부모 노드가 된다.)

##### 2️⃣ 서로소 집합 알고리즘의 find 함수

서로소 집합 알고리즘으로 루트 노드를 찾기 위해서는 재귀적으로 부모를 거슬러 올라가야 한다.

Find 함수를 재귀적으로 불러서 답을 구할 수 있지만, 최악의 경우 모든 노드를 다 확인해야 하는 O(V) 의 복잡도가 발생한다.

이렇게 되면 Union 연산의 개수가 M개 일 때 시간 복잡도는 👉 O(VM) (비효율적)

이 문제는 **경로 압축 기법** 을 활용하면 시간 복잡도를 개선할 수 있다.



🔸 경로 압축 기법

​	find 함수를 재귀적으로 호출한 뒤에 **부모 테이블을 갱신**

##### 3️⃣ 서로소 집합을 활용한 사이클 판별

무방향 그래프 내에서의 사이클을 판별할 때 사용할 수 있다.

```python
1. 각 간선을 확인하며 두 노드의 루트 노드를 확인한다.
2. 루트 노드가 서로 다르다면 --> 두 노드에 대하여 union
3. 루트 노드가 서로 같다면 --> Cycle 발생한 것
4. 그래프에 포함되어 있는 모든 간선에 대하여 (1, 2 or 3) 을 반복
```

👉 무방향 그래프가 사이클을 포함하고 있는지/아닌지를 **서로소 집합의 union & find** 를 활용해서 알아낸다.



#### 🌱 신장 트리

